### typeof、instanceof 和 constructor

```javascript
let arr = ['a', 'b', 'c'];
typeof arr; // return "object"
arr instanceof Array; // true
arr.constructor(); //[]
```

当一个变量为数组的时候`typeof`会返回`object`

### 双叹号(!!)快速转换布尔值

```javascript
let a = !!'a';
```

返回的是`true`,也就是说任何一个值前面加`!!`都可以恒等于`true`。除非这个值是布尔值，或者为`undefined`, `null`, `0`, `false`, `NaN`, `''`, 这些值本身是`false`,所以加了两个`!!`之后，还是 `fasle`。

### 请尽量使用===（或!==），而不是==（或!=）

`==`（或`!=）`操作符在需要的时候会自动执行类型转换。`===`（或`!==`）操作不会执行任何转换，它将比较值和类型，而且在速度上也被认为优于`==`。

### 逗号操作符

```javascript
let a = 0;
let b = (a++, 99);
console.log(a); // a = 1
console.log(b); // b = 99
```

### if 语句

在使用 if 进行基本判断时，可以省略赋值运算符。

```javascript
if (likeJavaScript === true)
```

简写为：

```javascript
if (likeJavaScript)
```

### if 语句变形

```javascript
let day = new Date().getDay() === 0;
//传统if语句
if (day) {
  alert('Today is Sunday!');
}
//运用逻辑与代替if
day && alert('Today is Sunday!');
//如果判断!day
day || alert('Today is not Sunday!');

//多条语句
if (day) alert(1), alert(2), console.log(3);
```

### 在特定范围内获取一个随机数

```javascript
/*最小值min， 最大值*/
function random(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}
```

### 验证 Number

```javascript
function isNumber(n) {
  return !isNaN(parseFloat(n)) && isFinite(n);
}
```

### 四舍五入一个数字，保留 N 位小数

```javascript
let num = 3.141592653;
num = num.toFixed(4); //toFixed()方法可把 Number 四舍五入为指定小数位数的数字，括号里面取值0~20（包括0和20）
console.log(num); //3.1416
```

### 数字交换不声明中间变量的方法

```javascript
let a = 1,
  b = 2;
a = [b, (b = a)][0];
console.log('a:' + a + ',b:' + b);
```

### 整数操作

使用`|0`，`~~`，`>>0`可以将浮点转成整型且效率方面要比同类的`parseInt`,`Math.round` 要快,在处理像素及动画位移等效果的时候会很有用。

```javascript
let foo = (12.4 / 4.13) | 0; //结果为3
let bar = ~~(12.4 / 4.13); //结果为3
let aa = 9.9 >> 0; //结果为9
```

### 浮点数问题

```
0.1 + 0.2 === 0.3 // is false
9007199254740992 + 1 // is equal to 9007199254740992
9007199254740992 + 2 // is equal to 9007199254740994
```

可以使用 `toFixed()` 和 `toPrecision()` 方法解决这个问题。

### String 去空格

- 去除首尾空格

```javascript
// trimLeft/trimStart去掉首部空格，trimRight/trimEnd去掉尾部空格
String.prototype.trim = function() {
  return this.replace(/(^\s*)|(\s*$)/g, '');
};
```

- 去除所有空格

```javascript
String.prototype.trim = function() {
  return this.replace(/\s+/g, '');
};
```

### 清空数组

```javascript
let arr = [
  //...
];
arr.length = 0;
//或
arr = [];
//或
arr.splice(0, arr.length);
```

### 一个简单的数组去重

```javascript
let a = [1, 2, 3, 3, 2];
console.log([...new Set(a)]);
```

### 数组清洗

洗掉数组中一些无用的值，如`0`,`undefined`,`null`,`false`等

```javascript
let myArray = [
  //...
];
myArray
  .map(item => {
    // ...
  })
  // Get rid of bad values
  .filter(Boolean);
```

### 统计数组中相同项的个数

```javascript
let cars = ['BMW', 'Benz', 'Benz', 'Tesla', 'BMW', 'Toyota'];
let carsObj = cars.reduce(function(obj, name) {
  obj[name] = obj[name] ? ++obj[name] : 1;
  return obj;
}, {});
console.log(carsObj); // => { BMW: 2, Benz: 2, Tesla: 1, Toyota: 1 }
```

### 验证数组

```javascript
function isArray(obj) {
  return Array.isArray(obj) || Object.prototype.toString.call(obj) === '[object Array]';
}
```

### HTML 转义函数

```javascript
function escapeHTML(text) {
    let replacements= {"<": "&lt;", ">": "&gt;","&": "&amp;", "\"": "&quot;"};
    return text.replace(/[<>&"]/g, function(character) {
        return replacements[character];
    });
}
```

### 原始运算符始终比函数调用要高效

```javascript
//不使用
let min = Math.min(a,b);
A.push(v);
//使用
let min = a < b ? a b;
A[A.length] = v;
```

### 时间格式化，前面少零处理

```javascript
function paddingLeftZero(str) {
  return ('00' + str).substr(str.length);
}
```

### JSON 转 URL 参数

```javascript
function json2url(json) {
  let arr = [];
  for (let name in json) {
    arr.push(name + '=' + json[name]);
  }
  return arr.join('&');
}
```

### 字符串拼接

尽量使用 es6 的模板字符串``

```javascript
let str = '一个字符串';
let str2 = '第二个' + str;
//使用模板字符串
let str = '一个字符串';
let str2 = `第二个${str}`;
```

### Object.is()

```javascript
0 == ' '; //true
null == undefined; //true
[1] == true; //true

NaN === NaN; //false
//...
Object.is(0, ' '); //false
Object.is(null, undefined); //false
Object.is([1], true); //false
Object.is(NaN, NaN); //true
```

### 深拷贝

```javascript
function deepClone(initalObj, finalObj) {
  let obj = finalObj || {};
  for (let i in initalObj) {
    let prop = initalObj[i];

    // 避免相互引用对象导致死循环，如initalObj.a = initalObj的情况
    if (prop === obj) {
      continue;
    }

    if (typeof prop === 'object') {
      obj[i] = prop.constructor === Array ? [] : {};
      arguments.callee(prop, obj[i]);
    } else {
      obj[i] = prop;
    }
  }
  return obj;
}

//第二种
function deepClone(initalObj, finalObj) {
  let obj = finalObj || {};
  for (let i in initalObj) {
    let prop = initalObj[i];

    // 避免相互引用对象导致死循环，如initalObj.a = initalObj的情况
    if (prop === obj) {
      continue;
    }

    if (typeof prop === 'object') {
      obj[i] = prop.constructor === Array ? [] : Object.create(prop);
    } else {
      obj[i] = prop;
    }
  }
  return obj;
}
```
